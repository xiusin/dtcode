# FlowClaude å¼€å‘æ–‡æ¡£

## 1. å‚è€ƒé¡¹ç›®

### 1Code (github.com/21st-dev/1Code)
- **å®šä½**: Better UI app for running code agents in parallel
- **æŠ€æœ¯æ ˆ**: Tauri + React (Electron alternative)
- **æ ¸å¿ƒåŠŸèƒ½**:
  - Git Worktree Isolation - æ¯ä¸ªèŠå¤©ä¼šè¯åœ¨ç‹¬ç«‹çš„å·¥ä½œæ ‘ä¸­è¿è¡Œ
  - Background Execution - åå°è¿è¡Œä»£ç†ï¼Œä¸å½±å“ä¸»åˆ†æ”¯
  - Local-first - æ‰€æœ‰ä»£ç ä¿ç•™åœ¨æœ¬åœ°ï¼Œæ— äº‘åŒæ­¥
  - Diff Previews - å®æ—¶æŸ¥çœ‹ Claude çš„æ›´æ”¹
  - Integrated Terminal - åº”ç”¨å†…å®Œæ•´ç»ˆç«¯è®¿é—®

### Cursor IDE
- **è®¾è®¡é£æ ¼å‚è€ƒ**: ç®€æ´ç°ä»£çš„æ·±è‰²ä¸»é¢˜
- **UI å¸ƒå±€**: ä¸‰æ å¸ƒå±€ (Sidebar + Chat + Changes/Git)
- **é…è‰²**: é»‘è‰²èƒŒæ™¯ (#000000)ï¼Œç°ç™½è‰²æ–‡å­—ï¼Œè“è‰²å¼ºè°ƒè‰²

## 2. å®ç°è¿›åº¦

### âœ… å·²å®Œæˆ

#### é¡¹ç›®åŸºç¡€æ¶æ„
- [x] .NET 8.0 å¤šé¡¹ç›®è§£å†³æ–¹æ¡ˆæ­å»º
- [x] Avalonia UI 11.0.11 é›†æˆ
- [x] CommunityToolkit.Mvvm 8.2.2 (MVVM æ¨¡å¼)
- [x] ä¾èµ–æ³¨å…¥ (Microsoft.Extensions.DependencyInjection)
- [x] SQLite æ•°æ®åº“ (Dapper)
- [x] Git æœåŠ¡ (LibGit2Sharp)

#### é¡¹ç›®ç»“æ„
```
FlowClaude/
â”œâ”€â”€ FlowClaude.Core/          # æ ¸å¿ƒä¸šåŠ¡å®ä½“å’Œæ¥å£
â”‚   â”œâ”€â”€ Entities/             # Chat, GitFileChange, Project, Workspace
â”‚   â””â”€â”€ Interfaces/           # IAgentService, IGitService, ITerminalService
â”œâ”€â”€ FlowClaude.Infrastructure/# åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ Database/             # SqliteRepository å®ç°
â”‚   â”œâ”€â”€ Git/                  # GitService å®ç°
â”‚   â””â”€â”€ Terminal/             # TerminalService å®ç°
â”œâ”€â”€ FlowClaude.Agent/         # Claude Agent æœåŠ¡
â”œâ”€â”€ FlowClaude.App/           # Avalonia UI åº”ç”¨
â”‚   â”œâ”€â”€ Views/                # MainWindow, ChatView, TerminalView, etc.
â”‚   â”œâ”€â”€ ViewModels/           # MainWindowViewModel, ChatViewModel, etc.
â”‚   â”œâ”€â”€ Controls/             # è‡ªå®šä¹‰æ§ä»¶
â”‚   â””â”€â”€ Services/             # UI ç›¸å…³æœåŠ¡
â””â”€â”€ FlowClaude.Server/        # Web API æœåŠ¡å™¨ (å¤‡ç”¨)
```

#### UI å®ç°
- [x] æ— è¾¹æ¡†çª—å£ (SystemDecorations="None")
- [x] è‡ªå®šä¹‰çª—å£æ§åˆ¶æŒ‰é’® (æœ€å°åŒ–/æœ€å¤§åŒ–/å…³é—­)
- [x] ä¸‰æ å¸ƒå±€ (Sidebar + Chat + Changes)
- [x] é¡¶éƒ¨æ  (æ ‡é¢˜ + çª—å£æ§åˆ¶)
- [x] ä¾§è¾¹æ  (æ–°å»ºèŠå¤©ã€å†å²è®°å½•ã€è®¾ç½®)
- [x] æ¬¢è¿ç•Œé¢ (Emoji + æç¤ºæ–‡æœ¬ + å»ºè®®å¡ç‰‡)
- [x] æ·±è‰²ä¸»é¢˜é…è‰²ç³»ç»Ÿ

#### åŠŸèƒ½æ¨¡å—
- [x] çª—å£çŠ¶æ€ç®¡ç† (MainWindowViewModel)
- [x] èŠå¤©è§†å›¾ (ChatViewModel)
- [x] ç»ˆç«¯è§†å›¾ (TerminalViewModel)
- [x] æ›´æ”¹è§†å›¾ (ChangesViewModel)
- [x] é¡¹ç›®å’Œå·¥ä½œåŒºç®¡ç†
- [x] Git Worktree æ”¯æŒ

### â³ å¾…å®Œæˆ

#### UI/UX æ”¹è¿›
- [ ] æ¶²æ€ç»ç’ƒé£æ ¼æ•ˆæœ (Glass/Liquid morphism)
- [ ] åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ
- [ ] å“åº”å¼å¸ƒå±€é€‚é…
- [ ] æš—è‰²/äº®è‰²ä¸»é¢˜åˆ‡æ¢
- [ ] å­—ä½“æ¸²æŸ“ä¼˜åŒ– (Inter å­—ä½“)

#### åŠŸèƒ½å®Œå–„
- [ ] Claude Agent é›†æˆ (éœ€è¦ Claude CLI)
- [ ] å®æ—¶æ¶ˆæ¯æµå¼ä¼ è¾“
- [ ] ä»£ç è¯­æ³•é«˜äº® (AvaloniaEdit æˆ– TextMate)
- [ ] æ–‡ä»¶å·®å¼‚å¯¹æ¯” (Diff Viewer)
- [ ] Git æ“ä½œé¢æ¿
- [ ] è®¾ç½®é¡µé¢

#### è´¨é‡ä¿éšœ
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] CI/CD æµæ°´çº¿

## 3. æŠ€æœ¯æ¶æ„

### 3.1 å‰ç«¯ (Avalonia UI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Views:                                             â”‚
â”‚  â”œâ”€â”€ MainWindow.axaml        # ä¸»çª—å£               â”‚
â”‚  â”œâ”€â”€ ChatView.axaml          # èŠå¤©ç•Œé¢             â”‚
â”‚  â”œâ”€â”€ TerminalView.axaml      # ç»ˆç«¯ç•Œé¢             â”‚
â”‚  â”œâ”€â”€ ChangesView.axaml       # æ–‡ä»¶æ›´æ”¹ç•Œé¢         â”‚
â”‚  â””â”€â”€ SettingsView.axaml      # è®¾ç½®ç•Œé¢             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ViewModels:                                        â”‚
â”‚  â”œâ”€â”€ MainWindowViewModel     # ä¸»çª—å£çŠ¶æ€ç®¡ç†       â”‚
â”‚  â”œâ”€â”€ ChatViewModel           # èŠå¤©é€»è¾‘             â”‚
â”‚  â”œâ”€â”€ TerminalViewModel       # ç»ˆç«¯æ¨¡æ‹Ÿ             â”‚
â”‚  â””â”€â”€ ChangesViewModel        # Git æ›´æ”¹è·Ÿè¸ª         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Styles:                                            â”‚
â”‚  â”œâ”€â”€ App.axaml               # å…¨å±€æ ·å¼å’Œä¸»é¢˜       â”‚
â”‚  â””â”€â”€ FluentStyles.xaml       # Fluent Design æ ·å¼   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 åç«¯ (Core + Infrastructure)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Core Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Entities:                                           â”‚
â”‚  â”œâ”€â”€ Chat                    # èŠå¤©ä¼šè¯             â”‚
â”‚  â”œâ”€â”€ Workspace               # å·¥ä½œåŒº               â”‚
â”‚  â”œâ”€â”€ Project                 # é¡¹ç›®                 â”‚
â”‚  â””â”€â”€ GitFileChange           # Git æ–‡ä»¶æ›´æ”¹         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Interfaces:                                         â”‚
â”‚  â”œâ”€â”€ IAgentService           # Agent æ‰§è¡Œæ¥å£       â”‚
â”‚  â”œâ”€â”€ IGitService             # Git æ“ä½œæ¥å£         â”‚
â”‚  â”œâ”€â”€ IRepository<T>          # æ•°æ®ä»“å‚¨æ¥å£         â”‚
â”‚  â””â”€â”€ ITerminalService        # ç»ˆç«¯æœåŠ¡æ¥å£         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Infrastructure Layer                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Database:                                           â”‚
â”‚  â”œâ”€â”€ SqliteRepository        # SQLite åŸºç¡€ä»“å‚¨      â”‚
â”‚  â”œâ”€â”€ SqliteChatRepository    # èŠå¤©æ•°æ®ä»“å‚¨         â”‚
â”‚  â”œâ”€â”€ SqliteProjectRepository # é¡¹ç›®æ•°æ®ä»“å‚¨         â”‚
â”‚  â””â”€â”€ SqliteWorkspaceRepository# å·¥ä½œåŒºæ•°æ®ä»“å‚¨      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Services:                                           â”‚
â”‚  â”œâ”€â”€ GitService              # LibGit2Sharp å°è£…    â”‚
â”‚  â””â”€â”€ TerminalService         # ç»ˆç«¯æ‰§è¡ŒæœåŠ¡         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 æŠ€æœ¯æ ˆè¯¦æƒ…

| åˆ†ç±» | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| UI æ¡†æ¶ | Avalonia | 11.0.11 | è·¨å¹³å°æ¡Œé¢ UI |
| UI ä¸»é¢˜ | Avalonia.FluentTheme | 11.0.11 | Fluent Design ä¸»é¢˜ |
| å­—ä½“ | Avalonia.Fonts.Inter | 11.0.11 | Inter å­—ä½“æ”¯æŒ |
| MVVM | CommunityToolkit.Mvvm | 8.2.2 | å“åº”å¼ç¼–ç¨‹ |
| DI | Microsoft.Extensions.DependencyInjection | 8.0.0 | ä¾èµ–æ³¨å…¥ |
| æ—¥å¿— | Microsoft.Extensions.Logging | 8.0.0 | æ—¥å¿—è®°å½• |
| HTTP | Microsoft.Extensions.Http | 8.0.0 | HTTP å®¢æˆ·ç«¯ |
| æ•°æ®åº“ | Dapper | 2.1.28 | ORM |
| SQLite | Microsoft.Data.Sqlite | 8.0.0 | SQLite é©±åŠ¨ |
| Git | LibGit2Sharp | 0.27.2 | Git æ“ä½œ |
| è¿›ç¨‹ | System.Diagnostics.Process | 8.0.0 | è¿›ç¨‹ç®¡ç† |

### 3.4 æ•°æ®æ¨¡å‹

```csharp
// é¡¹ç›®
public class Project
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public string Path { get; set; }
    public string? RemoteUrl { get; set; }
    public DateTime CreatedAt { get; set; }
}

// å·¥ä½œåŒº
public class Workspace
{
    public Guid Id { get; set; }
    public Guid ProjectId { get; set; }
    public string Name { get; set; }
    public string BranchName { get; set; }
    public string WorktreePath { get; set; }
    public bool IsPinned { get; set; }
    public bool IsArchived { get; set; }
    public DateTime CreatedAt { get; set; }
}

// èŠå¤©ä¼šè¯
public class Chat
{
    public Guid Id { get; set; }
    public Guid WorkspaceId { get; set; }
    public string Title { get; set; }
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
}

// Git æ–‡ä»¶æ›´æ”¹
public class GitFileChange
{
    public string FileName { get; set; }
    public string Status { get; set; } // Added, Modified, Deleted
    public string? Diff { get; set; }
}
```

### 3.5 çª—å£å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FlowClaude  [â”€] [â–¡] [Ã—]                                   â”‚ 40px
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        â”‚                                     â”‚             â”‚
â”‚ Sidebarâ”‚          Chat Area                  â”‚   Changes   â”‚ 260px
â”‚        â”‚                                     â”‚   (280px)   â”‚
â”‚        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚             â”‚
â”‚        â”‚    â”‚  ğŸ‘‹                      â”‚      â”‚             â”‚
â”‚        â”‚    â”‚  How can I help you?    â”‚      â”‚             â”‚
â”‚        â”‚    â”‚  [Help me understand]   â”‚      â”‚             â”‚
â”‚        â”‚    â”‚  [Create a new feature] â”‚      â”‚             â”‚
â”‚ New    â”‚    â”‚  [Fix a bug]            â”‚      â”‚             â”‚
â”‚ Chat   â”‚    â”‚  ...                    â”‚      â”‚             â”‚
â”‚        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚             â”‚
â”‚        â”‚                                     â”‚             â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚             â”‚
â”‚        â”‚  â”‚ [Input message...]    [â†‘]   â”‚    â”‚             â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚             â”‚
â”‚        â”‚                                     â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. è¿è¡Œè¯´æ˜

### ç¯å¢ƒè¦æ±‚
- .NET 8.0 SDK
- macOS / Windows / Linux

### è¿è¡Œå‘½ä»¤
```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ
dotnet run --project src/FlowClaude.App/FlowClaude.App.csproj

# æ„å»ºå‘å¸ƒ
dotnet build -c Release
dotnet publish -c Release -r osx-x64 --self-contained false
```

### æ³¨æ„äº‹é¡¹
- Claude Agent åŠŸèƒ½éœ€è¦å•ç‹¬ä¸‹è½½ Claude CLI äºŒè¿›åˆ¶
- å½“å‰ UI ä¸ºåŸºç¡€ç‰ˆæœ¬ï¼Œåç»­ä¼šæŒç»­ä¼˜åŒ–