<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="using:FlowClaude.App.Converters"
             x:Class="FlowClaude.App.App"
             RequestedThemeVariant="Dark">
  
  <Application.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceInclude Source="avares://FlowClaude/Controls/FluentStyles.xaml"/>
      </ResourceDictionary.MergedDictionaries>
      
      <!-- Converters -->
      <conv:EnumToBoolConverter x:Key="EnumToBoolConverter"/>
      <conv:BoolToBrushConverter x:Key="BoolToBrushConverter"/>
      <conv:BoolToBoolConverter x:Key="BoolToBoolConverter"/>
      <conv:NumberToBoolConverter x:Key="NumberToBoolConverter"/>
      <conv:BoolToThemeIconConverter x:Key="BoolToThemeIconConverter"/>
      <conv:StringToBoolConverter x:Key="StringToBoolConverter"/>
      <conv:RoleToBrushConverter x:Key="RoleToBrushConverter"/>
      <conv:RoleToIconConverter x:Key="RoleToIconConverter"/>
      <conv:RoleToTextConverter x:Key="RoleToTextConverter"/>
      <conv:StatusToBrushConverter x:Key="StatusToBrushConverter"/>
      
      <!-- Only override specific colors here if needed -->
      <Color x:Key="AccentColor">#2A2A2A</Color>
    </ResourceDictionary>
  </Application.Resources>
  
  <Application.Styles>
    <FluentTheme/>
    
    <!-- ==================== Modern Clean Design System ==================== -->
    
    <!-- Window Control Button (macOS style) -->
    <Style Selector="Button.WindowControlButton">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Padding" Value="0"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="Width" Value="46"/>
      <Setter Property="Height" Value="28"/>
      <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
    </Style>
    <Style Selector="Button.WindowControlButton:pointerover">
      <Setter Property="Background" Value="#252525"/>
    </Style>
    <Style Selector="Button.WindowControlButton.Close:pointerover">
      <Setter Property="Background" Value="#E81123"/>
      <Setter Property="Foreground" Value="White"/>
    </Style>
    
    <!-- Top Bar Button (deprecated, use WindowControlButton) -->
    <Style Selector="Button.SidebarButton">
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
      <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Padding" Value="12,10"/>
      <Setter Property="HorizontalAlignment" Value="Stretch"/>
      <Setter Property="FontSize" Value="13"/>
    </Style>
    <Style Selector="Button.SidebarButton:pointerover">
      <Setter Property="Background" Value="#333333"/>
    </Style>
    <Style Selector="Button.SidebarButton.Bottom">
      <Setter Property="Background" Value="Transparent"/>
    </Style>
    <Style Selector="Button.SidebarButton.Bottom:pointerover">
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
    </Style>
    
    <!-- Sidebar Item -->
    <Style Selector="Border.SidebarItem">
      <Setter Property="Padding" Value="12,10"/>
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="Cursor" Value="Hand"/>
    </Style>
    <Style Selector="Border.SidebarItem:pointerover">
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
    </Style>
    
    <!-- Chat List Item -->
    <Style Selector="Border.ChatListItem">
      <Setter Property="Padding" Value="12,10,12,10"/>
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="Cursor" Value="Hand"/>
    </Style>
    <Style Selector="Border.ChatListItem:pointerover">
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
    </Style>
    
    <!-- Suggestion Chip -->
    <Style Selector="Border.SuggestionChip">
      <Setter Property="Padding" Value="14,10,14,10"/>
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="HorizontalAlignment" Value="Stretch"/>
    </Style>
    <Style Selector="Border.SuggestionChip:pointerover">
      <Setter Property="Background" Value="#333333"/>
    </Style>
    
    <!-- Chat Input -->
    <Style Selector="TextBox.ChatInput">
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
      <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="CornerRadius" Value="10"/>
      <Setter Property="Padding" Value="14,12,14,12"/>
      <Setter Property="FontSize" Value="14"/>
      <Setter Property="TextWrapping" Value="Wrap"/>
    </Style>
    <Style Selector="TextBox.ChatInput:focus">
      <Setter Property="Background" Value="#333333"/>
    </Style>
    
    <!-- Send Button -->
    <Style Selector="Button.SendButton">
      <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Width" Value="40"/>
      <Setter Property="Height" Value="40"/>
      <Setter Property="Padding" Value="0"/>
    </Style>
    <Style Selector="Button.SendButton:pointerover">
      <Setter Property="Background" Value="{DynamicResource PrimaryHover}"/>
    </Style>
    <Style Selector="Button.SendButton:disabled">
      <Setter Property="Background" Value="#333333"/>
    </Style>
    
    <!-- File Change Item -->
    <Style Selector="Border.FileChangeItem">
      <Setter Property="Padding" Value="12,10,12,10"/>
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
    </Style>
    <Style Selector="Border.FileChangeItem:pointerover">
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
    </Style>
    
    <!-- ScrollViewer -->
    <Style Selector="ScrollViewer">
      <Setter Property="Background" Value="Transparent"/>
    </Style>
    <Style Selector="ScrollViewer /template/ ScrollBar">
      <Setter Property="Width" Value="8"/>
      <Setter Property="Background" Value="Transparent"/>
    </Style>
    <Style Selector="ScrollViewer /template/ ScrollBar /template/ Thumb">
      <Setter Property="Background" Value="#404040"/>
      <Setter Property="CornerRadius" Value="4"/>
    </Style>
    <Style Selector="ScrollViewer /template/ ScrollBar:pointerover /template/ Thumb">
      <Setter Property="Background" Value="#505050"/>
    </Style>
    
    <!-- Chip Style for SuggestionChip -->
    <Style Selector="Border.Chip">
      <Setter Property="Padding" Value="14,10,14,10"/>
      <Setter Property="Background" Value="{DynamicResource AccentColor}"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="HorizontalAlignment" Value="Center"/>
    </Style>
    <Style Selector="Border.Chip:pointerover">
      <Setter Property="Background" Value="#333333"/>
    </Style>
    
    <!-- Message Content Style -->
    <Style Selector="TextBox.messageContent">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Padding" Value="0"/>
      <Setter Property="FontSize" Value="14"/>
      <Setter Property="TextWrapping" Value="Wrap"/>
    </Style>
    <Style Selector="TextBox.messageContent.IsError">
      <Setter Property="Foreground" Value="{DynamicResource ErrorColor}"/>
    </Style>
    
  </Application.Styles>
</Application>
