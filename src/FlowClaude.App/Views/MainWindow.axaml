<Window xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:vm="using:FlowClaude.App.ViewModels" x:Class="FlowClaude.App.Views.MainWindow" Title="FlowClaude" Width="1100" Height="700" MinWidth="900" MinHeight="600" Background="{DynamicResource AppBackground}" Foreground="{DynamicResource AppForeground}" SystemDecorations="None" x:DataType="vm:MainWindowViewModel">

  <Window.Styles>
    <Style Selector="Window">
      <Setter Property="WindowState" Value="Maximized"/>
    </Style>
  </Window.Styles>

  <Grid>
    <Border Height="40" Background="{DynamicResource SurfaceColor}">
      <Grid ColumnDefinitions="*,Auto,Auto,Auto">
        <Panel Grid.Column="0" Background="Transparent"/>
        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="16,0,0,0">
          <TextBlock Text="FlowClaude" FontSize="13" FontWeight="500" Foreground="{DynamicResource MutedForeground}"/>
        </StackPanel>
        <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center">
          <Button x:Name="MinimizeButton" Classes="TopBarButton" Content="&#x2014;"/>
          <Button x:Name="MaximizeButton" Classes="TopBarButton" Content="&#x25A1;"/>
          <Button x:Name="CloseButton" Classes="TopBarButton Close" Content="&#x2715;"/>
        </StackPanel>
      </Grid>
    </Border>

    <Grid Margin="0,40,0,0" ColumnDefinitions="260,*,Auto">
      <Border Grid.Column="0" Background="{DynamicResource SurfaceColor}" BorderThickness="0,0,1,0" BorderBrush="{DynamicResource BorderColor}">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <Button Grid.Row="0" Classes="SidebarButton" Margin="12,12,12,8">
            <StackPanel Orientation="Horizontal" Spacing="8">
              <TextBlock Text="+" FontSize="14"/>
              <TextBlock Text="New Chat" FontSize="13"/>
            </StackPanel>
          </Button>
          <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
              <TextBlock Text="Recent Chats" FontSize="11" Foreground="{DynamicResource MutedForeground}" Margin="16,8"/>
              <TextBlock Text="No recent chats" FontSize="12" Foreground="{DynamicResource MutedForeground}" Margin="16,0" TextAlignment="Center"/>
            </StackPanel>
          </ScrollViewer>
          <Button Grid.Row="2" Classes="SidebarButton Bottom" Margin="12,8,12,12">
            <StackPanel Orientation="Horizontal" Spacing="8">
              <TextBlock Text="&#x2699;" FontSize="14"/>
              <TextBlock Text="Settings" FontSize="13"/>
            </StackPanel>
          </Button>
        </Grid>
      </Border>

      <Grid Grid.Column="1">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="0">
              <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="24" Margin="0,80,0,0">
                <TextBlock Text="&#x1F44B;" FontSize="48"/>
                <TextBlock Text="How can I help you today?" FontSize="20" FontWeight="400" Foreground="{DynamicResource MutedForeground}"/>
                <ItemsControl ItemsSource="{Binding Suggestions}" HorizontalAlignment="Center">
                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <Border Classes="SuggestionChip">
                        <TextBlock Text="{Binding}" FontSize="13"/>
                      </Border>
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>
                </ItemsControl>
              </StackPanel>
              <StackPanel Spacing="16" Margin="16,16,16,80"/>
            </StackPanel>
          </ScrollViewer>
          <Border Grid.Row="1" Background="{DynamicResource SurfaceColor}" BorderThickness="0,1,0,0" BorderBrush="{DynamicResource BorderColor}" Padding="16,16,16,24">
            <Grid ColumnDefinitions="*,Auto">
              <TextBox Grid.Column="0" Classes="ChatInput" Text="{Binding InputText}" AcceptsReturn="True" MinHeight="44" MaxHeight="120"/>
              <Button Grid.Column="1" Classes="SendButton" Margin="8,0,0,0" Command="{Binding SendCommand}">
                <TextBlock Text="&#x2191;" FontSize="16" FontWeight="600"/>
              </Button>
            </Grid>
          </Border>
        </Grid>
      </Grid>

      <Border Grid.Column="2" Width="280" Background="{DynamicResource SurfaceColor}" BorderThickness="1,0,0,0" BorderBrush="{DynamicResource BorderColor}" IsVisible="{Binding ShowRightPanel}">
        <StackPanel>
          <TextBlock Text="Changes" FontSize="13" FontWeight="600" Padding="16,16,16,8"/>
          <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
              <TextBlock Text="No changes" FontSize="12" Foreground="{DynamicResource MutedForeground}" Margin="16" TextAlignment="Center"/>
            </StackPanel>
          </ScrollViewer>
        </StackPanel>
      </Border>
    </Grid>
  </Grid>
</Window>